origin = paste(origin,data[i,8],sep=";")
}
}
index_names_origin = data$name
#print(40*i+1)
data = read.csv("dvs.csv")   ####
#data = data[6:nrow(data),]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
dest = data$cor[1]
if(nrow(data)>1){
for(i in 2:nrow(data)){
dest = paste(dest,data[i,8],sep=";")
}
}
index_names_dest = data$name
url = paste(f,origin,s,dest,t,sep = "")
js = GET(url)
js = content(js)
json1 = jsonlite::fromJSON(toJSON(js))
data = json1$resourceSets$resources[[1]]$results
data = as.data.table(data)
data$destinationIndex = as.numeric(data$destinationIndex)
data$originIndex = as.numeric(data$originIndex)
data$travelDistance = as.numeric(data$travelDistance)
data = data[,c(1,2,4)]
data = dcast(data,originIndex~destinationIndex,value.var = "travelDistance")
colnames(data) = c("RVS/DVS",index_names_dest) ###
data$`RVS/DVS` = index_names_origin    ###
write.csv(data,file = ".\\RVS-DVS.csv",row.names = F)   ###
a
a[,-1]
a = matrix(nrow = 2, ncol = 2)
a
a[1,1]
a = a*2
a
a = 1
a
a = matrix(nrow = 2, ncol = 2,data = 1)
a
a[,-1]
a[1,1] = 2
a[,-1]
a
a[2,2] = 2
a
a[,-1]
a[,-1:2]
min(1,2)
e clear
clear
clc
data = read.csv("dvs.csv") ###
data = data[,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
origin = data$cor[1]
if(nrow(data)>1){
for(i in 2:nrow(data)){
origin = paste(origin,data[i,8],sep=";")
}
}
index_names_origin = data$name
for (i in 1:16)
{
print(40*i+1)
data = read.csv("phc.csv")   ####
e = min(606,40*i)
data = data[40*(i-1)+1:e,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
dest = data$cor[1]
if(nrow(data)>1){
for(i in 2:nrow(data)){
dest = paste(dest,data[i,8],sep=";")
}
}
index_names_dest = data$name
url = paste(f,origin,s,dest,t,sep = "")
js = GET(url)
js = content(js)
json1 = jsonlite::fromJSON(toJSON(js))
data = json1$resourceSets$resources[[1]]$results
data = as.data.table(data)
data$destinationIndex = as.numeric(data$destinationIndex)
data$originIndex = as.numeric(data$originIndex)
data$travelDistance = as.numeric(data$travelDistance)
data = data[,c(1,2,4)]
data = dcast(data,originIndex~destinationIndex,value.var = "travelDistance")
colnames(data) = c("DVS/PHC",index_names_dest) ###
data$`DVS/PHC` = index_names_origin    ###
if(i==1){
write.csv(data,file = ".\\DVS-PHC.csv",row.names = F)
}
else{
final = read.csv("DVS-PHC.csv")
final = cbind(final,data[,-1])
write.csv(final,file = ".\\DVS-PHC.csv",row.names = F)
}
#write.csv(data,file = ".\\RVS-DVS.csv",row.names = F)   ###
}
data = read.csv("dvs.csv") ###
data = data[,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
origin = data$cor[1]
if(nrow(data)>1){
for(i in 2:nrow(data)){
origin = paste(origin,data[i,8],sep=";")
}
}
index_names_origin = data$name
i = 1
print(40*i+1)
data = read.csv("phc.csv")   ####
e = min(606,40*i)
data = data[40*(i-1)+1:e,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
dest = data$cor[1]
if(nrow(data)>1){
for(i in 2:nrow(data)){
dest = paste(dest,data[i,8],sep=";")
}
}
index_names_dest = data$name
url = paste(f,origin,s,dest,t,sep = "")
js = GET(url)
js = content(js)
json1 = jsonlite::fromJSON(toJSON(js))
data = json1$resourceSets$resources[[1]]$results
data = as.data.table(data)
data$destinationIndex = as.numeric(data$destinationIndex)
data$originIndex = as.numeric(data$originIndex)
data$travelDistance = as.numeric(data$travelDistance)
data = data[,c(1,2,4)]
data = dcast(data,originIndex~destinationIndex,value.var = "travelDistance")
colnames(data) = c("DVS/PHC",index_names_dest) ###
data$`DVS/PHC` = index_names_origin    ###
if(i==1){
write.csv(data,file = ".\\DVS-PHC.csv",row.names = F)
}
else{
final = read.csv("DVS-PHC.csv")
final = cbind(final,data[,-1])
write.csv(final,file = ".\\DVS-PHC.csv",row.names = F)
}
i=1
i==1
write.csv(data,file = ".\\DVS-PHC.csv",row.names = F)
if(i==1){
write.csv(data,file = ".\\DVS-PHC.csv",row.names = F)
}
else{
final = read.csv("DVS-PHC.csv")
final = cbind(final,data[,-1])
write.csv(final,file = ".\\DVS-PHC.csv",row.names = F)
}
if(i==1)
{
write.csv(data,file = ".\\DVS-PHC.csv",row.names = F)
}
if(i>1)
{
final = read.csv("DVS-PHC.csv")
final = cbind(final,data[,-1])
write.csv(final,file = ".\\DVS-PHC.csv",row.names = F)
}
data = read.csv("dvs.csv") ###
data = data[,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
origin = data$cor[1]
if(nrow(data)>1){
for(i in 2:nrow(data)){
origin = paste(origin,data[i,8],sep=";")
}
}
index_names_origin = data$name
for (i in 1:16)
{
print(40*i+1)
data = read.csv("phc.csv")   ####
e = min(606,40*i)
data = data[40*(i-1)+1:e,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
dest = data$cor[1]
if(nrow(data)>1){
for(i in 2:nrow(data)){
dest = paste(dest,data[i,8],sep=";")
}
}
index_names_dest = data$name
url = paste(f,origin,s,dest,t,sep = "")
js = GET(url)
js = content(js)
json1 = jsonlite::fromJSON(toJSON(js))
data = json1$resourceSets$resources[[1]]$results
data = as.data.table(data)
data$destinationIndex = as.numeric(data$destinationIndex)
data$originIndex = as.numeric(data$originIndex)
data$travelDistance = as.numeric(data$travelDistance)
data = data[,c(1,2,4)]
data = dcast(data,originIndex~destinationIndex,value.var = "travelDistance")
colnames(data) = c("DVS/PHC",index_names_dest) ###
data$`DVS/PHC` = index_names_origin    ###
if(i==1)
{
write.csv(data,file = ".\\DVS-PHC.csv",row.names = F)
}
if(i>1)
{
final = read.csv("DVS-PHC.csv")
final = cbind(final,data[,-1])
write.csv(final,file = ".\\DVS-PHC.csv",row.names = F)
}
#write.csv(data,file = ".\\RVS-DVS.csv",row.names = F)   ###
}
final = read.csv(".\\DVS-PHC.csv")
print(40*i+1)
i = 1
print(40*i+1)
data = read.csv("phc.csv")   ####
e = min(606,40*i)
data = data[40*(i-1)+1:e,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
dest = data$cor[1]
if(nrow(data)>1){
for(i in 2:nrow(data)){
dest = paste(dest,data[i,8],sep=";")
}
}
index_names_dest = data$name
url = paste(f,origin,s,dest,t,sep = "")
js = GET(url)
js = content(js)
json1 = jsonlite::fromJSON(toJSON(js))
data = json1$resourceSets$resources[[1]]$results
data = as.data.table(data)
data$destinationIndex = as.numeric(data$destinationIndex)
data$originIndex = as.numeric(data$originIndex)
data$travelDistance = as.numeric(data$travelDistance)
data = data[,c(1,2,4)]
data = dcast(data,originIndex~destinationIndex,value.var = "travelDistance")
colnames(data) = c("DVS/PHC",index_names_dest) ###
data$`DVS/PHC` = index_names_origin    ###
i
i = 2
i = 1
print(40*i+1)
i
e = min(606,40*i)
data = data[40*(i-1)+1:e,]
i
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
data = read.csv("dvs.csv") ###
data = data[,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
origin = data$cor[1]
if(nrow(data)>1){
for(i in 2:nrow(data)){
origin = paste(origin,data[i,8],sep=";")
}
}
index_names_origin = data$name
for (i in 1:16)
{
print(40*i+1)
data = read.csv("phc.csv")   ####
e = min(606,40*i)
data = data[40*(i-1)+1:e,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
dest = data$cor[1]
if(nrow(data)>1){
for(j in 2:nrow(data)){
dest = paste(dest,data[j,8],sep=";")
}
}
index_names_dest = data$name
url = paste(f,origin,s,dest,t,sep = "")
js = GET(url)
js = content(js)
json1 = jsonlite::fromJSON(toJSON(js))
data = json1$resourceSets$resources[[1]]$results
data = as.data.table(data)
data$destinationIndex = as.numeric(data$destinationIndex)
data$originIndex = as.numeric(data$originIndex)
data$travelDistance = as.numeric(data$travelDistance)
data = data[,c(1,2,4)]
data = dcast(data,originIndex~destinationIndex,value.var = "travelDistance")
colnames(data) = c("DVS/PHC",index_names_dest) ###
data$`DVS/PHC` = index_names_origin    ###
if(i==1)
{
write.csv(data,file = ".\\DVS-PHC.csv",row.names = F)
}
if(i>1)
{
final = read.csv(".\\DVS-PHC.csv")
final = cbind(final,data[,-1])
write.csv(final,file = ".\\DVS-PHC.csv",row.names = F)
}
#write.csv(data,file = ".\\RVS-DVS.csv",row.names = F)   ###
}
i
print(40*i+1)
data = read.csv("phc.csv")   ####
e = min(606,40*i)
e
data = data[40*(i-1)+1:e,]
data = data[40*(i-1)+1:e,]
data$latitude = as.character(data$latitude)
print(40*i+1)
data = read.csv("phc.csv")   ####
e = min(606,40*i)
data = data[40*(i-1)+1:e,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
dest = data$cor[1]
if(nrow(data)>1){
for(j in 2:nrow(data)){
dest = paste(dest,data[j,8],sep=";")
}
}
index_names_dest = data$name
url = paste(f,origin,s,dest,t,sep = "")
js = GET(url)
js = content(js)
json1 = jsonlite::fromJSON(toJSON(js))
data = json1$resourceSets$resources[[1]]$results
js
js = GET(url)
js
js = content(js)
js
i = 1
print(30*i+1)
data = read.csv("phc.csv")   ####
e = min(606,30*i)
data = data[30*(i-1)+1:e,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
dest = data$cor[1]
if(nrow(data)>1){
for(j in 2:nrow(data)){
dest = paste(dest,data[j,8],sep=";")
}
}
index_names_dest = data$name
url = paste(f,origin,s,dest,t,sep = "")
js = GET(url)
js = content(js)
json1 = jsonlite::fromJSON(toJSON(js))
data = json1$resourceSets$resources[[1]]$results
data = as.data.table(data)
data$destinationIndex = as.numeric(data$destinationIndex)
data$originIndex = as.numeric(data$originIndex)
data$travelDistance = as.numeric(data$travelDistance)
data = data[,c(1,2,4)]
data = dcast(data,originIndex~destinationIndex,value.var = "travelDistance")
colnames(data) = c("DVS/PHC",index_names_dest) ###
data$`DVS/PHC` = index_names_origin    ###
if(i==1)
{
write.csv(data,file = ".\\DVS-PHC.csv",row.names = F)
}
if(i>1)
{
final = read.csv(".\\DVS-PHC.csv")
final = cbind(final,data[,-1])
write.csv(final,file = ".\\DVS-PHC.csv",row.names = F)
}
i = 2
print(30*i+1)
data = read.csv("phc.csv")   ####
e = min(606,30*i)
data = data[30*(i-1)+1:e,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
dest = data$cor[1]
if(nrow(data)>1){
for(j in 2:nrow(data)){
dest = paste(dest,data[j,8],sep=";")
}
}
index_names_dest = data$name
url = paste(f,origin,s,dest,t,sep = "")
js = GET(url)
js = content(js)
json1 = jsonlite::fromJSON(toJSON(js))
data = json1$resourceSets$resources[[1]]$results
print(30*i+1)
data = read.csv("phc.csv")   ####
e = min(606,30*i)
data
head(data)
data = data[30*(i-1)+1:e,]
head(data)
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
dest = data$cor[1]
if(nrow(data)>1){
for(j in 2:nrow(data)){
dest = paste(dest,data[j,8],sep=";")
}
}
index_names_dest = data$name
dest
origin
url = paste(f,origin,s,dest,t,sep = "")
url
js = GET(url)
js = content(js)
js
data
i
print(30*i+1)
data = read.csv("phc.csv")   ####
e = min(606,30*i)
print(30*i+1)
print(30*i+1)
data = read.csv("phc.csv")   ####
e = min(606,30*i)
data = data[30*(i-1)+1:e,]
data
e
data[31:60]
data[31:60,]
data = read.csv("phc.csv")   ####
data
data[31:60,]
30*(i-1)+1
e
data[30*(i-1)+1:e,]
data[(30*(i-1)+1):e,]
data = data[(30*(i-1)+1):e,]
data
data = read.csv("dvs.csv") ###
data = data[,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
origin = data$cor[1]
if(nrow(data)>1){
for(i in 2:nrow(data)){
origin = paste(origin,data[i,8],sep=";")
}
}
index_names_origin = data$name
for (i in 1:21)
{
print(30*i+1)
data = read.csv("phc.csv")   ####
e = min(606,30*i)
data = data[(30*(i-1)+1):e,]
data$latitude = as.character(data$latitude)
data$longitude = as.character(data$longitude)
data$cor = paste(data$latitude,data$longitude,sep = ",")
dest = data$cor[1]
if(nrow(data)>1){
for(j in 2:nrow(data)){
dest = paste(dest,data[j,8],sep=";")
}
}
index_names_dest = data$name
url = paste(f,origin,s,dest,t,sep = "")
js = GET(url)
js = content(js)
json1 = jsonlite::fromJSON(toJSON(js))
data = json1$resourceSets$resources[[1]]$results
data = as.data.table(data)
data$destinationIndex = as.numeric(data$destinationIndex)
data$originIndex = as.numeric(data$originIndex)
data$travelDistance = as.numeric(data$travelDistance)
data = data[,c(1,2,4)]
data = dcast(data,originIndex~destinationIndex,value.var = "travelDistance")
colnames(data) = c("DVS/PHC",index_names_dest) ###
data$`DVS/PHC` = index_names_origin    ###
if(i==1)
{
write.csv(data,file = ".\\DVS-PHC.csv",row.names = F)
}
if(i>1)
{
final = read.csv(".\\DVS-PHC.csv")
final = cbind(final,data[,-1])
write.csv(final,file = ".\\DVS-PHC.csv",row.names = F)
}
#write.csv(data,file = ".\\RVS-DVS.csv",row.names = F)   ###
}
data = read.csv("phc.csv")   ####
